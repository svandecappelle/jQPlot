!function(a){"use strict";a.jqplot.CanvasGridRenderer=function(){this.shadowRenderer=new a.jqplot.ShadowRenderer},a.jqplot.CanvasGridRenderer.prototype.init=function(b){this._ctx=null,a.extend(!0,this,b);var c={lineJoin:"miter",lineCap:"round",fill:!1,isarc:!1,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,lineWidth:this.shadowWidth,closePath:!1,strokeStyle:this.shadowColor};this.renderer.shadowRenderer.init(c)},a.jqplot.CanvasGridRenderer.prototype.createElement=function(b){var c,d,e;return this._elem&&(a.jqplot.use_excanvas&&window.G_vmlCanvasManager.uninitElement&&(c=this._elem.get(0),window.G_vmlCanvasManager.uninitElement(c),c=null),this._elem.emptyForce(),this._elem=null),c=b.canvasManager.getCanvas(),d=this._plotDimensions.width,e=this._plotDimensions.height,c.width=d,c.height=e,this._elem=a(c),this._elem.addClass("jqplot-grid-canvas"),this._elem.css({position:"absolute",left:0,top:0}),c=b.canvasManager.initCanvas(c),this._top=this._offsets.top,this._bottom=e-this._offsets.bottom,this._left=this._offsets.left,this._right=d-this._offsets.right,this._width=this._right-this._left,this._height=this._bottom-this._top,c=null,this._elem},a.jqplot.CanvasGridRenderer.prototype.draw=function(){var b,c,d,e,f,g,h,i,j,k;for(this._ctx=this._elem.get(0).getContext("2d"),b=this._ctx,c=this._axes,b.save(),b.clearRect(0,0,this._plotDimensions.width,this._plotDimensions.height),b.fillStyle=this.backgroundColor||this.background,b.fillRect(this._left,this._top,this._width,this._height),b.save(),b.lineJoin="miter",b.lineCap="butt",b.lineWidth=this.gridLineWidth,b.strokeStyle=this.gridLineColor,d=["xaxis","yaxis","x2axis","y2axis"],j=function(c,d,e,f,g){b.save(),g=g||{},(null===g.lineWidth||0!==g.lineWidth)&&(a.extend(!0,b,g),b.beginPath(),b.moveTo(c,d),b.lineTo(e,f),b.stroke(),b.restore())},this.renderXaxis=function(a,c,d){var e,f,g,h;if(a.showGridline&&this.drawGridlines&&(!a.isMinorTick&&d.drawMajorGridlines||a.isMinorTick&&d.drawMinorGridlines)&&j(c,this._top,c,this._bottom),a.showMark&&a.mark&&(!a.isMinorTick&&d.drawMajorTickMarks||a.isMinorTick&&d.drawMinorTickMarks)){switch(e=a.markSize,f=a.mark,c=Math.round(d.u2p(a.value))+.5,f){case"outside":h=this._bottom,g=this._bottom+e;break;case"inside":h=this._bottom-e,g=this._bottom;break;case"cross":h=this._bottom-e,g=this._bottom+e;break;default:h=this._bottom,g=this._bottom+e}this.shadow&&this.renderer.shadowRenderer.draw(b,[[c,h],[c,g]],{lineCap:"butt",lineWidth:this.gridLineWidth,offset:.75*this.gridLineWidth,depth:2,fill:!1,closePath:!1}),j(c,h,c,g)}},this.renderYaxis=function(a,c,d){var e,f,g,h;if(a.showGridline&&this.drawGridlines&&(!a.isMinorTick&&d.drawMajorGridlines||a.isMinorTick&&d.drawMinorGridlines)&&j(this._right,c,this._left,c),a.showMark&&a.mark&&(!a.isMinorTick&&d.drawMajorTickMarks||a.isMinorTick&&d.drawMinorTickMarks)){switch(e=a.markSize,f=a.mark,c=Math.round(d.u2p(a.value))+.5,f){case"outside":h=this._left-e,g=this._left;break;case"inside":h=this._left,g=this._left+e;break;case"cross":h=this._left-e,g=this._left+e;break;default:h=this._left-e,g=this._left}this.shadow&&this.renderer.shadowRenderer.draw(b,[[h,c],[g,c]],{lineCap:"butt",lineWidth:1.5*this.gridLineWidth,offset:.75*this.gridLineWidth,fill:!1,closePath:!1}),j(h,c,g,c,{strokeStyle:d.borderColor})}},this.renderX2axis=function(a,c,d){var e,f,g,h;if(a.showGridline&&this.drawGridlines&&(!a.isMinorTick&&d.drawMajorGridlines||a.isMinorTick&&d.drawMinorGridlines)&&j(c,this._bottom,c,this._top),a.showMark&&a.mark&&(!a.isMinorTick&&d.drawMajorTickMarks||a.isMinorTick&&d.drawMinorTickMarks)){switch(e=a.markSize,f=a.mark,c=Math.round(d.u2p(a.value))+.5,f){case"outside":g=this._top-e,h=this._top;break;case"inside":g=this._top,h=this._top+e;break;case"cross":g=this._top-e,h=this._top+e;break;default:g=this._top-e,h=this._top}this.shadow&&this.renderer.shadowRenderer.draw(b,[[c,g],[c,h]],{lineCap:"butt",lineWidth:this.gridLineWidth,offset:.75*this.gridLineWidth,depth:2,fill:!1,closePath:!1}),j(c,g,c,h)}},this.renderY2axis=function(a,c,d){var e,f,g,h;if(a.showGridline&&this.drawGridlines&&(!a.isMinorTick&&d.drawMajorGridlines||a.isMinorTick&&d.drawMinorGridlines)&&j(this._left,c,this._right,c),a.showMark&&a.mark&&(!a.isMinorTick&&d.drawMajorTickMarks||a.isMinorTick&&d.drawMinorTickMarks)){switch(e=a.markSize,f=a.mark,c=Math.round(d.u2p(a.value))+.5,f){case"outside":g=this._right,h=this._right+e;break;case"inside":g=this._right-e,h=this._right;break;case"cross":g=this._right-e,h=this._right+e;break;default:g=this._right,h=this._right+e}this.shadow&&this.renderer.shadowRenderer.draw(b,[[g,c],[h,c]],{lineCap:"butt",lineWidth:1.5*this.gridLineWidth,offset:.75*this.gridLineWidth,fill:!1,closePath:!1}),j(g,c,h,c,{strokeStyle:d.borderColor})}},this.drawXaxices=function(a,b,c,d){var e,f,g,h={};if(!b.show)return b=null,c=null,this;if(b.drawBaseline)switch(null!==b.baselineWidth&&(h.lineWidth=b.baselineWidth),null!==b.baselineColor&&(h.strokeStyle=b.baselineColor),a){case"xaxis":j(this._left,this._bottom,this._right,this._bottom,h);break;case"yaxis":j(this._left,this._bottom,this._left,this._top,h);break;case"x2axis":j(this._left,this._bottom,this._right,this._bottom,h);break;case"y2axis":j(this._right,this._bottom,this._right,this._top,h)}for(e=d;e>0;e--)if(f=c[e-1],f.show)switch(g=Math.round(b.u2p(f.value))+.5,a){case"xaxis":this.renderXaxis(f,g,b);break;case"yaxis":this.renderYaxis(f,g,b);break;case"x2axis":this.renderX2axis(f,g,b);break;case"y2axis":this.renderY2axis(f,g,b)}return f=null,b=null,c=null,this},this.drawYaxices=function(a,c){var d,e,f,g,h,i,k,l,m,n,o;if(!a.show)return a=null,void(c=null);for(d=c[a.numberTicks-1],e=c[0],f=a.getLeft(),g=[[f,d.getTop()+d.getHeight()/2],[f,e.getTop()+e.getHeight()/2+1]],this.shadow&&this.renderer.shadowRenderer.draw(b,g,{lineCap:"butt",fill:!1,closePath:!1}),j(g[0][0],g[0][1],g[1][0],g[1][1],{lineCap:"butt",strokeStyle:a.borderColor,lineWidth:a.borderWidth}),i=c.length;i>0;i--){if(h=c[i-1],l=h.markSize,m=h.mark,k=Math.round(a.u2p(h.value))+.5,h.showMark&&h.mark){switch(m){case"outside":n=f,o=f+l;break;case"inside":n=f-l,o=f;break;case"cross":n=f-l,o=f+l;break;default:n=f,o=f+l}g=[[n,k],[o,k]],this.shadow&&this.renderer.shadowRenderer.draw(b,g,{lineCap:"butt",lineWidth:1.5*this.gridLineWidth,offset:.75*this.gridLineWidth,fill:!1,closePath:!1}),j(n,k,o,k,{strokeStyle:a.borderColor})}h=null}e=null,a=null,c=null},e=4;e>0;e--)f=d[e-1],g=c[f],h=g._ticks,i=h.length,this.drawXaxices(f,g,h,i);for(d=["y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis","yMidAxis"],e=7;e>0;e--)g=c[d[e-1]],h=g._ticks,this.drawYaxices(g,h);b.restore(),this.shadow&&(k=[[this._left,this._bottom],[this._right,this._bottom],[this._right,this._top]],this.renderer.shadowRenderer.draw(b,k)),0!==this.borderWidth&&this.drawBorder&&(j(this._left,this._top,this._right,this._top,{lineCap:"round",strokeStyle:c.x2axis.borderColor,lineWidth:c.x2axis.borderWidth}),j(this._right,this._top,this._right,this._bottom,{lineCap:"round",strokeStyle:c.y2axis.borderColor,lineWidth:c.y2axis.borderWidth}),j(this._right,this._bottom,this._left,this._bottom,{lineCap:"round",strokeStyle:c.xaxis.borderColor,lineWidth:c.xaxis.borderWidth}),j(this._left,this._bottom,this._left,this._top,{lineCap:"round",strokeStyle:c.yaxis.borderColor,lineWidth:c.yaxis.borderWidth})),b.restore(),b=null,c=null}}(jQuery);