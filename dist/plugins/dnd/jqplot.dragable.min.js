!function(a){function b(){a.jqplot.GenericCanvas.call(this),this.isDragging=!1,this.isOver=!1,this._neighbor,this._cursors=[]}function c(b,c){var d=b.series[c.seriesIndex],e=d.plugins.dragable,f=d.markerRenderer,g=e.markerRenderer;if(g.style=f.style,g.lineWidth=f.lineWidth+2.5,g.size=f.size+5,!e.color){var h=a.jqplot.getColorComponents(f.color),i=[h[0],h[1],h[2]],j=h[3]>=.6?.6*h[3]:h[3]*(2-h[3]);e.color="rgba("+i[0]+","+i[1]+","+i[2]+","+j+")"}g.color=e.color,g.init();var k=c.pointIndex>0?c.pointIndex-1:0,l=c.pointIndex+2;e._gridData=d.gridData.slice(k,l)}function d(a,b,c,d,e){if(e.plugins.dragable.dragCanvas.isDragging){var f=e.plugins.dragable.dragCanvas,g=f._neighbor,h=e.series[g.seriesIndex],i=h.plugins.dragable,j=(h.gridData,"y"==i.constrainTo?g.gridData[0]:b.x),k="x"==i.constrainTo?g.gridData[1]:b.y,l=h._xaxis.series_p2u(j),m=h._yaxis.series_p2u(k),n=f._ctx;n.clearRect(0,0,n.canvas.width,n.canvas.height),g.pointIndex>0?i._gridData[1]=[j,k]:i._gridData[0]=[j,k],e.series[g.seriesIndex].draw(f._ctx,{gridData:i._gridData,shadow:!1,preventJqPlotSeriesDrawTrigger:!0,color:i.color,markerOptions:{color:i.color,shadow:!1},trendline:{show:!1}}),e.target.trigger("jqplotSeriesPointChange",[g.seriesIndex,g.pointIndex,[l,m],[j,k]])}else if(null!=d){var o=e.series[d.seriesIndex];if(o.isDragable){var f=e.plugins.dragable.dragCanvas;f.isOver||(f._cursors.push(a.target.style.cursor),a.target.style.cursor="pointer"),f.isOver=!0}}else if(null==d){var f=e.plugins.dragable.dragCanvas;f.isOver&&(a.target.style.cursor=f._cursors.pop(),f.isOver=!1)}}function e(a,b,d,e,f){var g=f.plugins.dragable.dragCanvas;if(g._cursors.push(a.target.style.cursor),null!=e){var h=f.series[e.seriesIndex],i=h.plugins.dragable;h.isDragable&&!g.isDragging&&(g._neighbor=e,g.isDragging=!0,c(f,e),i.markerRenderer.draw(h.gridData[e.pointIndex][0],h.gridData[e.pointIndex][1],g._ctx),a.target.style.cursor="move",f.target.trigger("jqplotDragStart",[e.seriesIndex,e.pointIndex,b,d]))}else{var j=g._ctx;j.clearRect(0,0,j.canvas.width,j.canvas.height),g.isDragging=!1}}function f(a,b,c,d,e){if(e.plugins.dragable.dragCanvas.isDragging){var f=e.plugins.dragable.dragCanvas,g=f._ctx;g.clearRect(0,0,g.canvas.width,g.canvas.height),f.isDragging=!1;var h=f._neighbor,i=e.series[h.seriesIndex],j=i.plugins.dragable,k="y"==j.constrainTo?h.data[0]:c[i.xaxis],l="x"==j.constrainTo?h.data[1]:c[i.yaxis];i.data[h.pointIndex][0]=k,i.data[h.pointIndex][1]=l,e.drawSeries({preventJqPlotSeriesDrawTrigger:!0},h.seriesIndex),f._neighbor=null,a.target.style.cursor=f._cursors.pop(),e.target.trigger("jqplotDragStop",[b,c])}}a.jqplot.Dragable=function(b){this.markerRenderer=new a.jqplot.MarkerRenderer({shadow:!1}),this.shapeRenderer=new a.jqplot.ShapeRenderer,this.isDragging=!1,this.isOver=!1,this._ctx,this._elem,this._point,this._gridData,this.color,this.constrainTo="none",a.extend(!0,this,b)},b.prototype=new a.jqplot.GenericCanvas,b.prototype.constructor=b,a.jqplot.Dragable.parseOptions=function(b,c){var d=c||{};this.plugins.dragable=new a.jqplot.Dragable(d.dragable),this.isDragable=a.jqplot.config.enablePlugins},a.jqplot.Dragable.postPlotDraw=function(){this.plugins.dragable&&this.plugins.dragable.highlightCanvas&&(this.plugins.dragable.highlightCanvas.resetCanvas(),this.plugins.dragable.highlightCanvas=null),this.plugins.dragable={previousCursor:"auto",isOver:!1},this.plugins.dragable.dragCanvas=new b,this.eventCanvas._elem.before(this.plugins.dragable.dragCanvas.createElement(this._gridPadding,"jqplot-dragable-canvas",this._plotDimensions,this));this.plugins.dragable.dragCanvas.setContext()},a.jqplot.preParseSeriesOptionsHooks.push(a.jqplot.Dragable.parseOptions),a.jqplot.postDrawHooks.push(a.jqplot.Dragable.postPlotDraw),a.jqplot.eventListenerHooks.push(["jqplotMouseMove",d]),a.jqplot.eventListenerHooks.push(["jqplotMouseDown",e]),a.jqplot.eventListenerHooks.push(["jqplotMouseUp",f])}(jQuery);