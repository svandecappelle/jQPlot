!function(a){a.jqplot.OHLCRenderer=function(){a.jqplot.LineRenderer.call(this),this.candleStick=!1,this.tickLength="auto",this.bodyWidth="auto",this.openColor=null,this.closeColor=null,this.wickColor=null,this.fillUpBody=!1,this.fillDownBody=!0,this.upBodyColor=null,this.downBodyColor=null,this.hlc=!1,this.lineWidth=1.5,this._tickLength,this._bodyWidth},a.jqplot.OHLCRenderer.prototype=new a.jqplot.LineRenderer,a.jqplot.OHLCRenderer.prototype.constructor=a.jqplot.OHLCRenderer,a.jqplot.OHLCRenderer.prototype.init=function(b){b=b||{},this.lineWidth=b.lineWidth||1.5,a.jqplot.LineRenderer.prototype.init.call(this,b),this._type="ohlc";var c=this._yaxis._dataBounds,d=this._plotData;if(d[0].length<5){this.renderer.hlc=!0;for(var e=0;e<d.length;e++)(d[e][2]<c.min||null==c.min)&&(c.min=d[e][2]),(d[e][1]>c.max||null==c.max)&&(c.max=d[e][1])}else for(var e=0;e<d.length;e++)(d[e][3]<c.min||null==c.min)&&(c.min=d[e][3]),(d[e][2]>c.max||null==c.max)&&(c.max=d[e][2])},a.jqplot.OHLCRenderer.prototype.draw=function(b,c,d){var e,f,g,h,i,j,k,l,m,n=this.data,o=this._xaxis.min,p=this._xaxis.max,q=0,r=n.length,s=this._xaxis.series_u2p,t=this._yaxis.series_u2p,u=this.renderer,v=void 0!=d?d:{};void 0!=v.shadow?v.shadow:this.shadow,void 0!=v.fill?v.fill:this.fill,void 0!=v.fillAndStroke?v.fillAndStroke:this.fillAndStroke;if(u.bodyWidth=void 0!=v.bodyWidth?v.bodyWidth:u.bodyWidth,u.tickLength=void 0!=v.tickLength?v.tickLength:u.tickLength,b.save(),this.show){for(var w,x,y,z,A,e=0;e<n.length;e++)n[e][0]<o?q=e:n[e][0]<p&&(r=e+1);var B=this.gridData[r-1][0]-this.gridData[q][0],C=r-q;try{var D=Math.abs(this._xaxis.series_u2p(parseInt(this._xaxis._intervalStats[0].sortedIntervals[0].interval,10))-this._xaxis.series_u2p(0))}catch(E){var D=B/C}u.candleStick?"number"==typeof u.bodyWidth?u._bodyWidth=u.bodyWidth:u._bodyWidth=Math.min(20,D/1.65):"number"==typeof u.tickLength?u._tickLength=u.tickLength:u._tickLength=Math.min(10,D/3.5);for(var e=q;r>e;e++)w=s(n[e][0]),u.hlc?(x=null,y=t(n[e][1]),z=t(n[e][2]),A=t(n[e][3])):(x=t(n[e][1]),y=t(n[e][2]),z=t(n[e][3]),A=t(n[e][4])),m={},u.candleStick&&!u.hlc?(j=u._bodyWidth,k=w-j/2,x>A?(u.wickColor?m.color=u.wickColor:u.downBodyColor&&(m.color=u.upBodyColor),g=a.extend(!0,{},v,m),u.shapeRenderer.draw(b,[[w,y],[w,A]],g),u.shapeRenderer.draw(b,[[w,x],[w,z]],g),m={},h=A,i=x-A,u.fillUpBody?m.fillRect=!0:(m.strokeRect=!0,j-=this.lineWidth,k=w-j/2),u.upBodyColor&&(m.color=u.upBodyColor,m.fillStyle=u.upBodyColor),l=[k,h,j,i]):A>x?(u.wickColor?m.color=u.wickColor:u.downBodyColor&&(m.color=u.downBodyColor),g=a.extend(!0,{},v,m),u.shapeRenderer.draw(b,[[w,y],[w,x]],g),u.shapeRenderer.draw(b,[[w,A],[w,z]],g),m={},h=x,i=A-x,u.fillDownBody?m.fillRect=!0:(m.strokeRect=!0,j-=this.lineWidth,k=w-j/2),u.downBodyColor&&(m.color=u.downBodyColor,m.fillStyle=u.downBodyColor),l=[k,h,j,i]):(u.wickColor&&(m.color=u.wickColor),g=a.extend(!0,{},v,m),u.shapeRenderer.draw(b,[[w,y],[w,z]],g),m={},m.fillRect=!1,m.strokeRect=!1,k=[w-j/2,x],h=[w+j/2,A],j=null,i=null,l=[k,h]),g=a.extend(!0,{},v,m),u.shapeRenderer.draw(b,l,g)):(f=v.color,u.openColor&&(v.color=u.openColor),u.hlc||u.shapeRenderer.draw(b,[[w-u._tickLength,x],[w,x]],v),v.color=f,u.wickColor&&(v.color=u.wickColor),u.shapeRenderer.draw(b,[[w,y],[w,z]],v),v.color=f,u.closeColor&&(v.color=u.closeColor),u.shapeRenderer.draw(b,[[w,A],[w+u._tickLength,A]],v),v.color=f)}b.restore()},a.jqplot.OHLCRenderer.prototype.drawShadow=function(a,b,c){},a.jqplot.OHLCRenderer.checkOptions=function(a,b,c){c.highlighter||(c.highlighter={showMarker:!1,tooltipAxes:"y",yvalues:4,formatString:'<table class="jqplot-highlighter"><tr><td>date:</td><td>%s</td></tr><tr><td>open:</td><td>%s</td></tr><tr><td>hi:</td><td>%s</td></tr><tr><td>low:</td><td>%s</td></tr><tr><td>close:</td><td>%s</td></tr></table>'})}}(jQuery);