!function(a){a.jqplot.PyramidAxisRenderer=function(){a.jqplot.LinearAxisRenderer.call(this)},a.jqplot.PyramidAxisRenderer.prototype=new a.jqplot.LinearAxisRenderer,a.jqplot.PyramidAxisRenderer.prototype.constructor=a.jqplot.PyramidAxisRenderer,a.jqplot.PyramidAxisRenderer.prototype.init=function(b){this.position=null,this.drawBaseline=!0,this.baselineWidth=null,this.baselineColor=null,this.tickSpacingFactor=25,this._type="pyramid",this._splitAxis=!1,this._splitLength=null,this.category=!1,this._autoFormatString="",this._overrideFormatString=!1,a.extend(!0,this,b),this.renderer.options=b,this.resetDataBounds=this.renderer.resetDataBounds,this.resetDataBounds()},a.jqplot.PyramidAxisRenderer.prototype.resetDataBounds=function(){var a=this._dataBounds;a.min=null,a.max=null;for(var b,c=0;c<this._series.length;c++)for(var d=this._series[c],e=d._plotData,f=0,g=e.length;g>f;f++)"x"===this.name.charAt(0)?(b=e[f][1],(null!==b&&b<a.min||null===a.min)&&(a.min=b),(null!==b&&b>a.max||null===a.max)&&(a.max=b)):(b=e[f][0],(null!==b&&b<a.min||null===a.min)&&(a.min=b),(null!==b&&b>a.max||null===a.max)&&(a.max=b))},a.jqplot.PyramidAxisRenderer.prototype.draw=function(b,c){if(this.show){this.renderer.createTicks.call(this,c);if(this._elem&&(this._elem.emptyForce(),this._elem=null),this._elem=a(document.createElement("div")),this._elem.addClass("jqplot-axis jqplot-"+this.name),this._elem.css("position","absolute"),"xaxis"==this.name||"x2axis"==this.name?this._elem.width(this._plotDimensions.width):this._elem.height(this._plotDimensions.height),this.labelOptions.axis=this.name,this._label=new this.labelRenderer(this.labelOptions),this._label.show){var d=this._label.draw(b,c);d.appendTo(this._elem),d=null}for(var e,f=this._ticks,g=0;g<f.length;g++)e=f[g],e.show&&e.showLabel&&!e.isMinorTick&&this._elem.append(e.draw(b,c));e=null,f=null}return this._elem};for(var b=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],c={},d=0,e=b.length;e>d;d++)c[b[d]]=b[d];a.jqplot.PyramidAxisRenderer.prototype.createTicks=function(b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this.ticks,w=this._dataBounds,x=(this.min,this.max,null);if(v.length){for(h=0,i=v.length;i>h;h++)k=v[h],l=new this.tickRenderer(this.tickOptions),a.isArray(k)?(l.value=k[0],l.label=k[1],l.setTick(k[0],this.name),this._ticks.push(l)):a.isPlainObject(k)?(a.extend(!0,l,k),l.axis=this.name,this._ticks.push(l)):(t="string"==typeof k?h+b.defaultAxisStart:k,l.value=t,l.label=k,l.axis=this.name,this._ticks.push(l));if(this.numberTicks=v.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value,this.tickInterval=(this.max-this.min)/(this.numberTicks-1),this._options.tickInterval){var y=this._options.tickInterval;for(h=0;h<this.numberTicks;h++)h%y!==0&&(this._ticks[h].isMinorTick=!0)}else if(d="x"===this.name.charAt(0)?this._plotDimensions.width:this._plotDimensions.height,s=Math.round(2+d/this.tickSpacingFactor),this.numberTicks>s){for(u=this.numberTicks-1,h=2;u>h;h++)if(u%h===0&&s>u/h){x=h-1;break}if(null!==x){var z=1;for(h=1,i=this._ticks.length;i>h;h++)x>=z?(this._ticks[h].show=!1,z+=1):z=1}}if(u=[],this.category){for(this._ticks[0].showGridline=!1,this._ticks[0].showMark=!1,h=this._ticks.length-1;h>0;h--)l=new this.tickRenderer(this.tickOptions),l.value=this._ticks[h-1].value+this.tickInterval/2,l.label="",l.showLabel=!1,l.axis=this.name,this._ticks[h].showGridline=!1,this._ticks[h].showMark=!1,this._ticks.splice(h,0,l);l=new this.tickRenderer(this.tickOptions),l.value=this._ticks[0].value-this.tickInterval/2,l.label="",l.showLabel=!1,l.axis=this.name,this._ticks.unshift(l),l=new this.tickRenderer(this.tickOptions),l.value=this._ticks[this._ticks.length-1].value+this.tickInterval/2,l.label="",l.showLabel=!1,l.axis=this.name,this._ticks.push(l),this.tickInterval=this.tickInterval/2,this.numberTicks=this._ticks.length,this.min=this._ticks[0].value,this.max=this._ticks[this._ticks.length-1].value}}else{if("x"===this.name.charAt(0)){d=this._plotDimensions.width;var A=Math.max(w.max,Math.abs(w.min)),B=Math.min(w.min,-A);e=B,f=A,g=f-e,null!=this.tickOptions&&this.tickOptions.formatString||(this._overrideFormatString=!0),m=30,n=Math.max(d,m+1),o=(n-m)/300,p=a.jqplot.LinearTickGenerator(e,f,o),q=e+g*(this.padMin-1),r=f-g*(this.padMax-1),(q>e||f>r)&&(q=e-g*(this.padMin-1),r=f+g*(this.padMax-1),p=a.jqplot.LinearTickGenerator(q,r,o)),this.min=p[0],this.max=p[1],this.numberTicks=p[2],this._autoFormatString=p[3],this.tickInterval=p[4]}else if(d=this._plotDimensions.height,e=w.min,f=w.max,j=this._series[0],this._ticks=[],g=f-e,c[g]&&(g+=1,f+=1),this.max=f,this.min=e,s=Math.round(2+d/this.tickSpacingFactor),s>=g+1)this.numberTicks=g+1,this.tickInterval=1;else for(var h=s;h>1;h--)if(g/(h-1)===Math.round(g/(h-1))){this.numberTicks=h,this.tickInterval=g/(h-1);break}this._overrideFormatString&&""!=this._autoFormatString&&(this.tickOptions=this.tickOptions||{},this.tickOptions.formatString=this._autoFormatString);var C;for(h=0;h<this.numberTicks;h++)this.tickOptions.axis=this.name,C=this.min+this.tickInterval*h,"x"===this.name.charAt(0)&&(C=Math.abs(C)),this.tickOptions.value=this.min+this.tickInterval*h,l=new this.tickRenderer(this.tickOptions),l.label=l.prefix+l.formatter(l.formatString,C),this._ticks.push(l),"x"===this.name.charAt(0)&&b.axes.yMidAxis.show&&0===this.tickOptions.value&&(this._splitAxis=!0,this._splitLength=b.axes.yMidAxis.getWidth(),l=new this.tickRenderer(this.tickOptions),this._ticks.push(l),l.value=this.max/2e3);l=null}},a.jqplot.PyramidAxisRenderer.prototype.set=function(){var b,c,d,f,g=0,h=0,i=0,j=null==this._label?!1:this._label.show;if(this.show){for(d=this._ticks,e=d.length,c=0;e>c;c++)f=d[c],!f._breakTick&&f.show&&f.showLabel&&!f.isMinorTick&&(b="x"===this.name.charAt(0)?f._elem.outerHeight(!0):f._elem.outerWidth(!0),b>g&&(g=b));if("yMidAxis"===this.name)for(c=0;e>c;c++)f=d[c],f._elem&&(b=(g-f._elem.outerWidth(!0))/2,f._elem.css("left",b));if(f=null,d=null,j&&(h=this._label._elem.outerWidth(!0),i=this._label._elem.outerHeight(!0)),"xaxis"===this.name)g+=i,this._elem.css({height:g+"px",left:"0px",bottom:"0px"});else if("x2axis"===this.name)g+=i,this._elem.css({height:g+"px",left:"0px",top:"0px"});else if("yaxis"===this.name)g+=h,this._elem.css({width:g+"px",left:"0px",top:"0px"}),j&&this._label.constructor==a.jqplot.AxisLabelRenderer&&this._label._elem.css("width",h+"px");else if("yMidAxis"===this.name){var b=g/2-h/2;this._elem.css({width:g+"px",top:"0px"}),j&&this._label.constructor==a.jqplot.AxisLabelRenderer&&this._label._elem.css({width:h,left:b,top:0})}else g+=h,this._elem.css({width:g+"px",right:"0px",top:"0px"}),j&&this._label.constructor==a.jqplot.AxisLabelRenderer&&this._label._elem.css("width",h+"px")}},a.jqplot.PyramidAxisRenderer.prototype.pack=function(b,c){b=b||{},c=c||this._offsets;var d=this._ticks,e=this.max,f=this.min,g=c.max,h=c.min,i=null==this._label?!1:this._label.show;for(var j in b)this._elem.css(j,b[j]);this._offsets=c;var k=g-h,l=e-f,m=this._splitLength;if(this._splitAxis?(k-=this._splitLength,this.p2u=function(a){return(a-h)*l/k+f},this.u2p=function(a){return 0>=a?(a-f)*k/l+h:(a-f)*k/l+h+m},this.series_u2p=function(a){return 0>=a?(a-f)*k/l:(a-f)*k/l+m},this.series_p2u=function(a){return a*l/k+f}):(this.p2u=function(a){return(a-h)*l/k+f},this.u2p=function(a){return(a-f)*k/l+h},"x"===this.name.charAt(0)?(this.series_u2p=function(a){return(a-f)*k/l},this.series_p2u=function(a){return a*l/k+f}):(this.series_u2p=function(a){return(a-e)*k/l},this.series_p2u=function(a){return a*l/k+e})),this.show)if("x"===this.name.charAt(0)){for(var n=0;n<d.length;n++){var o=d[n];if(o.show&&o.showLabel){var p;if(o.constructor==a.jqplot.CanvasAxisTickRenderer&&o.angle){var q="xaxis"==this.name?1:-1;switch(o.labelPosition){case"auto":p=q*o.angle<0?-o.getWidth()+o._textRenderer.height*Math.sin(-o._textRenderer.angle)/2:-o._textRenderer.height*Math.sin(o._textRenderer.angle)/2;break;case"end":p=-o.getWidth()+o._textRenderer.height*Math.sin(-o._textRenderer.angle)/2;break;case"start":p=-o._textRenderer.height*Math.sin(o._textRenderer.angle)/2;break;case"middle":p=-o.getWidth()/2+o._textRenderer.height*Math.sin(-o._textRenderer.angle)/2;break;default:p=-o.getWidth()/2+o._textRenderer.height*Math.sin(-o._textRenderer.angle)/2}}else p=-o.getWidth()/2;var r=this.u2p(o.value)+p+"px";o._elem.css("left",r),o.pack()}}if(i){var s=this._label._elem.outerWidth(!0);this._label._elem.css("left",h+k/2-s/2+"px"),"xaxis"==this.name?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack()}}else{for(var n=0;n<d.length;n++){var o=d[n];if(o.show&&o.showLabel&&!o.isMinorTick){var p;if(o.constructor==a.jqplot.CanvasAxisTickRenderer&&o.angle){var q="yaxis"==this.name?1:-1;switch(o.labelPosition){case"auto":case"end":p=q*o.angle<0?-o._textRenderer.height*Math.cos(-o._textRenderer.angle)/2:-o.getHeight()+o._textRenderer.height*Math.cos(o._textRenderer.angle)/2;break;case"start":p=o.angle>0?-o._textRenderer.height*Math.cos(-o._textRenderer.angle)/2:-o.getHeight()+o._textRenderer.height*Math.cos(o._textRenderer.angle)/2;break;case"middle":p=-o.getHeight()/2;break;default:p=-o.getHeight()/2}}else p=-o.getHeight()/2;var r=this.u2p(o.value)+p+"px";o._elem.css("top",r),o.pack()}}if(i){var t=this._label._elem.outerHeight(!0);"yMidAxis"!==this.name&&this._label._elem.css("top",g-k/2-t/2+"px"),"yaxis"==this.name?this._label._elem.css("left","0px"):"yMidAxis"!==this.name&&this._label._elem.css("right","0px"),this._label.pack()}}d=null}}(jQuery);