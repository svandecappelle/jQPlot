function jqplotToImg(objId){var newCanvas=document.createElement("canvas");newCanvas.width=$("#"+objId).width();
newCanvas.height=$("#"+objId).height();var baseOffset=$("#"+objId).offset();$("#"+objId).children().each(function(){if($(this)[0].tagName.toLowerCase()=="div"){$(this).children("canvas").each(function(){var offset=$(this).offset();
newCanvas.getContext("2d").drawImage(this,offset.left-baseOffset.left,offset.top-baseOffset.top)
});$(this).children("div").each(function(){var offset=$(this).offset();var context=newCanvas.getContext("2d");
context.font=$(this).css("font-style")+" "+$(this).css("font-size")+" "+$(this).css("font-family");
context.fillText($(this).html(),offset.left-baseOffset.left,offset.top-baseOffset.top+10)
})}else{if($(this)[0].tagName.toLowerCase()=="canvas"){var offset=$(this).offset();
newCanvas.getContext("2d").drawImage(this,offset.left-baseOffset.left,offset.top-baseOffset.top)
}}});$("#"+objId).children(".jqplot-point-label").each(function(){var offset=$(this).offset();
var context=newCanvas.getContext("2d");context.font=$(this).css("font-style")+" "+$(this).css("font-size")+" "+$(this).css("font-family");
context.fillText($(this).html(),offset.left-baseOffset.left,offset.top-baseOffset.top+10)
});$("#"+objId+" *").children(".jqplot-table-legend-swatch").each(function(){var offset=$(this).offset();
var context=newCanvas.getContext("2d");context.setFillColor($(this).css("background-color"));
context.fillRect(offset.left-baseOffset.left,offset.top-baseOffset.top,15,15)});$("#"+objId+" *").children(".jqplot-table-legend td:last-child").each(function(){var offset=$(this).offset();
var context=newCanvas.getContext("2d");context.font=$(this).css("font-style")+" "+$(this).css("font-size")+" "+$(this).css("font-family");
context.fillText($(this).html(),offset.left-baseOffset.left,offset.top-baseOffset.top+15)
});return newCanvas.toDataURL()};